<div data-controller="data-update-script" class="crayons-card p-6 grid gap-6">
  <table class="crayons-table">
    <thead>
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Filename</th>
        <th scope="col" class="whitespace-nowrap">Status</th>
        <th scope="col">Created at</th>
        <th scope="col">Run at</th>
        <th scope="col">Re-run</th>
      </tr>
    </thead>
    <tbody class="crayons-card">
      <% @data_update_scripts.each do |script| %>
        <tr class="<%= 'alert-danger' if script.status == 'failed' %>" id="data_update_script_<%= script.id %>_row">
          <td id="data_update_script_<%= script.id %>" class="whitespace-nowrap"><%= script.id %></td>
          <td id="data_update_script_<%= script.id %>_file_name"><%= script.file_name %></td>
          <td id="data_update_script_<%= script.id %>_status" class="justify-content-center">
            <%= script.status %>
            <% if script.error.present? %>
              <div class="fs-xs"><%= script.error %></div>
            <% end %>
          </td>
          <td id="data_update_script_<%= script.id %>_created_at"><%= script.created_at %></td>
          <td id="data_update_script_<%= script.id %>_run_at" class="whitespace-nowrap"><%= script.run_at %></td>
          <td id="data_update_script_<%= script.id %>_button" class="whitespace-nowrap">
            <button data-action="click->data-update-script#forceRun" data-value="<%= script.id %>" type="button" className="crayons-btn crayons-btn--secondary">
              Re-run
            </button>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</main>
