<% smtp_enabled = ForemInstance.smtp_enabled? %>

<div class="flex flex-col">
  <% unless smtp_enabled %>
    <div class="crayons-card">
      <div class="crayons-card__body p-4 grid gap-6 l:grid-flow-col align-items-center">
        <div>
          SMTP settings are required so that your Forem can send emails.
          If you wish to send invites, email digests and activity notifications you will need to
          specify which email host will relay those messages for you. You can read more about SMTP Settings
          <a href="https://admin.forem.com/docs/advanced-customization/config/smtp-settings" target="_blank">here</a>.
        </div>
        <div>
          <%= link_to "Configure SMTP Settings", admin_config_path(anchor: "smtp-section"), target: "_blank", rel: :noopener %>
        </div>
      </div>
    </div>
  <% end %>

  <%= form_for(User.new, url: admin_invitations_path) do |f| %>
    <div
      class="crayons-field mt-6 <%= "crayons-hover-tooltip" unless smtp_enabled %>"
      data-tooltip="<%= "Configure SMTP Settings first" unless smtp_enabled %>">
      <div class="mt-6">
        <%= f.label :email, class: "crayons-field__label" %>
        <%= f.text_field :email,
                         class: "crayons-textfield #{'cursor-not-allowed' unless smtp_enabled}",
                         placeholder: "Email of invitee",
                         required: true,
                         disabled: !smtp_enabled %>
      </div>
      <div class="mt-6">
        <%= f.label :name, class: "crayons-field__label" %>
        <%= f.text_field :name,
                         class: "crayons-textfield #{'cursor-not-allowed' unless smtp_enabled}",
                         placeholder: "Name of invitee",
                         required: true,
                         disabled: !smtp_enabled %>
      </div>
      <div class="mt-6">
        <%= f.submit "Invite User", class: "crayons-btn", disabled: !smtp_enabled %>
      </div>
    </div>
  <% end %>
</div>
